name: build
on: [push]
jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [windows-latest]
    steps:
    - uses: actions/checkout@v2
    - uses: msys2/setup-msys2@v2
      with:
        update: true
        install: >-
          cmake
          diffutils
          make
          nasm
          patch
          tar
          texinfo
    - name: Downloading Files
      shell: bash
      run: |
        bash a_download_files.sh
    - name: Cache Files
      uses: actions/cache@v2
      with:
        path: files
        key: ${{ runner.os }}-files
    - name: Building
      shell: bash
      run: |
        bash 1_build_everything.sh
